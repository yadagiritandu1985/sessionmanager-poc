resource "aws_iam_user" "new_users" {
  count = length(var.username)
  name = element(var.username,count.index )
}

resource "aws_iam_user_login_profile" "newusers" {
    count = length(var.username)
    user = var.username[count.index]
    password_reset_required = true
    pgp_key = "keybase:yadagiritandu"
}

# rh]5S]oZkV3$=q=2Loz}

# 135702907123
#SCMS%@xJ3ska6RGtThZq


# password = [
#   "wcFMA+GhAnfGDuw8AQ//fpAJAccYZSyEEwMZlxcOfw8d43i05+Op19bpVy0zbloQRvp7DoA/NqSwkjXw/f5NE9HjNtvZ8b70jGI/eHGLsyOenRxOnik4N3OSsl96dbPNykzLtKlAVfIIyZsKhwX6NBtzEeGHZEWT/E/U0vw3IPJ9+CJLfXcqtPW/3Uyj31veTgthyG+4ejRVhcvb74JrjEAAYRPqey1pq1Gez6wmBvjVi7l9mZE6aukY73a41vuKePYBCguTKcZGVXJUJb3J1ncR79cKj7LU+VPDpNin8zOPVwqNO8Lvvl/VQY7BJCQugVM64P7h31G/60XiRVQmmK6XldUKFrdCKMdeF4iyQgmBD9lCmlFfiXyrsu6M7iTXW33twUatTlhZCAD9bSA3P8472cyFHqaUAX1AcHXtkhBEmYazni59A27ilvE5nVqlxDOt2o4pyxuDRAte9/Hsz4YIxhdB0MVq9C1wDSaQV8vLbblADRde30sBz81Je+q2zOQk64JDIAlS8n4+7JmIkp7eIR6ORvQyoynGgYoKHbx/oVaoPNMPD7Ft3XovFI4Dr2LnE3KxBpJ2jZpUsyJxcqeEAArLsu/qZj8nRl4Cko9BiUAT67aQl2Imqevlx6oubwno91xlmKMOxPAmonZONOKy/kOKO/X7rrzebvWqj1jHLu7hVyMX53B/OO4VSsrSRQFlQKP6hNrl1OlSKGHRVKlnrVFvcgWgpnewfzhNje0rY9SlTjTdfFBjwb/wxE5+xooK6jLgBGBvIuyYsAk7XmYKhX4vzA==",
#   "wcFMA+GhAnfGDuw8ARAApUho1lxH8t2FoSPt3xHANu4V6uVsCiSemuJY5HdU0/LrI4wshm33D1IwuOPIXLHlcEggPA0fy0GR0mhZ4LHoLesF99DikRJQqsF4UGsOtebmCFTQxOpATcyITWCWZVxJwQ9Zm9PsTKPi4QIW5UyI5dNazg5wvgrR5Tlvur1cJ0YIWsxlEGLANixKmJjA3b3YIDYM/VzzxRRujwLorw9ZCSCqyxqgjyupTFTkwRrl2fcN1jjJ8GmBchQPts2vqXZZxtyiQv3hSBWHAXbweq3sNqzjAZ8OpMg+0kSCeOq4ZxDvtIQ//UpDfO+k6zUeB40rUvGlzzesCOUw5sQRumcVbjCV5EO070YPGnia6vZMlQkMM7gEa+jHr7P3ZxOQugP0zrYJA1DPPMMU0GBxU/ZZvB86KnRIhsnqwiJhaHepcj8uqfx0z7UqL/V7mMV6Dr9BqFhhMS2m1NENmwYF1SktpBw3DbV0JaX6pqslWkIhic0ov+Ntee4YyRX0tuqNa/yfCr1jlaVZ1B/2mVDwajhO0Q69/0iL7pft8oR1MlbndQ5VzGFonu5KctPxzDUfeznIXu5q5+VrXEGbju3rTCOD7treQSREzqa81XWhLYTY+xlRRFy+j5XcaJTPw0EuQDJbNolpXBX82nMMnfk6ipwymlwAc0VoHH+NAeb+cYIpaALSRQFvSxv5B14jMiaBfkeUtkag0tFkqij7ldpq/MpdDrkJ7z9ZAZcOTvrYY90UTAXCEbzUnB+lORTwp1UX+AzPKuxvPVNv6g==",
# ]



# echo "wcFMA+GhAnfGDuw8AQ//fpAJAccYZSyEEwMZlxcOfw8d43i05+Op19bpVy0zbloQRvp7DoA/NqSwkjXw/f5NE9HjNtvZ8b70jGI/eHGLsyOenRxOnik4N3OSsl96dbPNykzLtKlAVfIIyZsKhwX6NBtzEeGHZEWT/E/U0vw3IPJ9+CJLfXcqtPW/3Uyj31veTgthyG+4ejRVhcvb74JrjEAAYRPqey1pq1Gez6wmBvjVi7l9mZE6aukY73a41vuKePYBCguTKcZGVXJUJb3J1ncR79cKj7LU+VPDpNin8zOPVwqNO8Lvvl/VQY7BJCQugVM64P7h31G/60XiRVQmmK6XldUKFrdCKMdeF4iyQgmBD9lCmlFfiXyrsu6M7iTXW33twUatTlhZCAD9bSA3P8472cyFHqaUAX1AcHXtkhBEmYazni59A27ilvE5nVqlxDOt2o4pyxuDRAte9/Hsz4YIxhdB0MVq9C1wDSaQV8vLbblADRde30sBz81Je+q2zOQk64JDIAlS8n4+7JmIkp7eIR6ORvQyoynGgYoKHbx/oVaoPNMPD7Ft3XovFI4Dr2LnE3KxBpJ2jZpUsyJxcqeEAArLsu/qZj8nRl4Cko9BiUAT67aQl2Imqevlx6oubwno91xlmKMOxPAmonZONOKy/kOKO/X7rrzebvWqj1jHLu7hVyMX53B/OO4VSsrSRQFlQKP6hNrl1OlSKGHRVKlnrVFvcgWgpnewfzhNje0rY9SlTjTdfFBjwb/wxE5+xooK6jLgBGBvIuyYsAk7XmYKhX4vzA==" | base64 --decode | keybase pgp decrypt



# echo "wcFMA+GhAnfGDuw8ARAApUho1lxH8t2FoSPt3xHANu4V6uVsCiSemuJY5HdU0/LrI4wshm33D1IwuOPIXLHlcEggPA0fy0GR0mhZ4LHoLesF99DikRJQqsF4UGsOtebmCFTQxOpATcyITWCWZVxJwQ9Zm9PsTKPi4QIW5UyI5dNazg5wvgrR5Tlvur1cJ0YIWsxlEGLANixKmJjA3b3YIDYM/VzzxRRujwLorw9ZCSCqyxqgjyupTFTkwRrl2fcN1jjJ8GmBchQPts2vqXZZxtyiQv3hSBWHAXbweq3sNqzjAZ8OpMg+0kSCeOq4ZxDvtIQ//UpDfO+k6zUeB40rUvGlzzesCOUw5sQRumcVbjCV5EO070YPGnia6vZMlQkMM7gEa+jHr7P3ZxOQugP0zrYJA1DPPMMU0GBxU/ZZvB86KnRIhsnqwiJhaHepcj8uqfx0z7UqL/V7mMV6Dr9BqFhhMS2m1NENmwYF1SktpBw3DbV0JaX6pqslWkIhic0ov+Ntee4YyRX0tuqNa/yfCr1jlaVZ1B/2mVDwajhO0Q69/0iL7pft8oR1MlbndQ5VzGFonu5KctPxzDUfeznIXu5q5+VrXEGbju3rTCOD7treQSREzqa81XWhLYTY+xlRRFy+j5XcaJTPw0EuQDJbNolpXBX82nMMnfk6ipwymlwAc0VoHH+NAeb+cYIpaALSRQFvSxv5B14jMiaBfkeUtkag0tFkqij7ldpq/MpdDrkJ7z9ZAZcOTvrYY90UTAXCEbzUnB+lORTwp1UX+AzPKuxvPVNv6g==" | base64 --decode | keybase pgp decrypt